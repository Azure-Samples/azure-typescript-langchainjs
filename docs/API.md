# API Documentation

This document describes the API endpoints available in the Azure TypeScript LangChain.js project.

## Chat API

The Chat API allows you to interact with the Azure OpenAI model to generate chat completions.

### POST /api/chat

Generates a chat completion based on provided messages.

#### Request

```http
POST /api/chat
Content-Type: application/json

{
  "messages": [
    {
      "role": "system",
      "content": "You are a helpful assistant."
    },
    {
      "role": "user",
      "content": "Hello, how are you?"
    }
  ],
  "temperature": 0.7
}
```

#### Request Body Parameters

| Parameter    | Type    | Required | Description                                                                     |
|--------------|---------|----------|---------------------------------------------------------------------------------|
| messages     | Array   | Yes      | An array of message objects representing the conversation history               |
| temperature  | Number  | No       | Controls randomness in the generation (0-2). Default is 0.7                     |

#### Message Object Structure

| Field        | Type    | Required | Description                                                                     |
|--------------|---------|----------|---------------------------------------------------------------------------------|
| role         | String  | Yes      | One of: 'system', 'user', or 'assistant'                                        |
| content      | String  | Yes      | The content of the message                                                      |

#### Response

```http
HTTP/1.1 200 OK
Content-Type: application/json

{
  "message": "I'm doing well, thank you for asking! How can I assist you today?"
}
```

#### Response Body Parameters

| Parameter    | Type    | Description                                                                      |
|--------------|---------|----------------------------------------------------------------------------------|
| message      | String  | The message content generated by the assistant                                   |

#### Error Responses

**400 Bad Request**

Returned when the request is invalid, such as missing required fields or invalid data types.

```http
HTTP/1.1 400 Bad Request
Content-Type: application/json

{
  "error": "Invalid request format",
  "details": {
    "messages": {
      "_errors": ["Required"]
    }
  }
}
```

**500 Internal Server Error**

Returned when there's an error processing the request.

```http
HTTP/1.1 500 Internal Server Error
Content-Type: application/json

{
  "error": "An error occurred while processing your request"
}
```

## Usage Examples

### cURL

```bash
curl -X POST http://localhost:3000/api/chat \
  -H "Content-Type: application/json" \
  -d '{
    "messages": [
      {
        "role": "system",
        "content": "You are a helpful assistant."
      },
      {
        "role": "user",
        "content": "Hello, how are you?"
      }
    ],
    "temperature": 0.7
  }'
```

### JavaScript (Fetch API)

```javascript
const response = await fetch('/api/chat', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    messages: [
      {
        role: 'system',
        content: 'You are a helpful assistant.',
      },
      {
        role: 'user',
        content: 'Hello, how are you?',
      },
    ],
    temperature: 0.7,
  }),
});

const data = await response.json();
console.log(data.message);
```

### TypeScript (with Interfaces)

```typescript
import { ChatMessage, ChatCompletionRequest, ChatCompletionResponse } from '@/types/chat';

const messages: ChatMessage[] = [
  {
    role: 'system',
    content: 'You are a helpful assistant.',
  },
  {
    role: 'user',
    content: 'Hello, how are you?',
  },
];

const requestBody: ChatCompletionRequest = {
  messages,
  temperature: 0.7,
};

const response = await fetch('/api/chat', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify(requestBody),
});

const data: ChatCompletionResponse = await response.json();
console.log(data.message);
```
